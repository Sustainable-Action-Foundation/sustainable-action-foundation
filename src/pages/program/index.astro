--- 
    import { pbFetch, removeTags } from "@functions";
import Layout from "@layouts/Layout.astro";

    const programs: Array<Program> = await pbFetch({
        collection: "programs",
        sort: "-created",
    });

    programs.forEach((program: Program) => {
        const previewString = removeTags(program.description)
        if (previewString && previewString.length > 100) {
            program.preview = `${previewString.slice(0, 97)}...`
        } else if (previewString) {
            program.preview = previewString
        }

    })


---

<Layout
    title="Program - Sustainable action foundation"
    description="Program"
>
    <main>
		<section class="padding-inline-50 padding-bottom-300">
            <container class="margin-inline-auto">
                <h1>Program</h1>
                <ul>
                    {programs.map((program: Program) => (
                        <li>
                            <a href={`/program/${program.id}`}>
                                <h2>{program.title}</h2> 
                                {program.preview}
                            </a>
                        </li>
                    ))}
                </ul>
            </container>
        </section>
    </main>
</Layout>

<style>
    h1 {
        margin-block: 3rem;
        font-size: 2rem;
    }

    li {
        width: min(75ch, 100%);
    }

    a {
        text-decoration: none;
        color: black;
    }

    a:hover {
        text-decoration: underline;
    }

</style>